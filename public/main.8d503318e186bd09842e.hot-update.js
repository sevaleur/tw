/*! For license information please see main.8d503318e186bd09842e.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatetraewarren("main",{"./app/components/Canvas/Controller/pages/Work/Element/index.js":(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var a=i("./node_modules/three/build/three.module.js"),n=i("./node_modules/gsap/index.js"),s=i("./app/shaders/vertex.glsl"),r=i("./app/shaders/hoverSquare/fragment.glsl");class h{constructor({element:e,index:t,link:i,displacement:a,template:n,geometry:s,scene:r,screen:h,viewport:u}){this.element=e,this.index=t,this.link=i,this.disp=a,this.template=n,this.geo=s,this.scene=r,this.screen=h,this.viewport=u,this.animations={show:!1,time:0},this.createMaterial(),this.createTexture(),this.createMesh(),this.createAnimations(),this.createBounds(),this.addEventListeners()}createMaterial(){this.material=new a.ShaderMaterial({vertexShader:s.default,fragmentShader:r.default,uniforms:{tMap:{value:null},tHover:{value:null},tDisplacement:{value:this.disp},uAlpha:{value:0},uState:{value:0},uTime:{value:0},uWidth:{value:.1},uRadius:{value:.3},uLeaveState:{value:0},uImageSize:{value:[0,0]},uPlaneSize:{value:[0,0]},uViewportSize:{value:[this.viewport.width,this.viewport.height]}},transparent:!0})}createTexture(){let e=this.element.getAttribute("data-src"),t=this.element.getAttribute("data-hover");this.texture=window.IMAGE_TEXTURES[e],this.texture2=window.IMAGE_TEXTURES[t],this.material.uniforms.tMap.value=this.texture,this.material.uniforms.tHover.value=this.texture2,this.material.uniforms.uImageSize.value=[this.texture.source.data.naturalWidth,this.texture.source.data.naturalHeight]}createMesh(){this.plane=new a.Mesh(this.geo,this.material),this.scene.add(this.plane)}createBounds(){this.bounds=this.element.getBoundingClientRect(),this.updateScale(),this.updateX(),this.updateY(),this.plane.material.uniforms.uPlaneSize.value=[this.plane.scale.x,this.plane.scale.y]}createAnimations(){this.onAlphaChange=n.default.fromTo(this.material.uniforms.uAlpha,{value:0},{value:1,delay:.5,paused:!0}),this.onStateChange=n.default.fromTo(this.material.uniforms.uState,{value:0},{value:.2,duration:1,ease:"power2.inOut",paused:!0}),this.onShow=n.default.fromTo(this.element,{scale:0},{scale:1,duration:1,delay:.2*this.index,ease:"power2.inOut",paused:!0,onComplete:()=>{this.animations.show=!0}})}onMouseEnter(){this.onStateChange.play()}onMouseLeave(){this.onStateChange.reverse()}show(){this.onAlphaChange.play(),this.onShow.play()}hide(){this.material.uniforms.uLeaveState.value=1,this.material.uniforms.uWidth.value=.1,this.material.uniforms.uRadius.value=.12,this.onStateChange.play()}onResize(e){if(e){const{screen:t,viewport:i}=e;t&&(this.screen=t),i&&(this.viewport=i,this.plane.material.uniforms.uViewportSize.value=[this.viewport.width,this.viewport.height])}this.createBounds()}updateScale(){this.plane.scale.x=this.viewport.width*this.bounds.width/this.screen.width,this.plane.scale.y=this.viewport.height*this.bounds.height/this.screen.height,this.plane.material.uniforms.uPlaneSize.value=[this.plane.scale.x,this.plane.scale.y]}updateX(e=0){this.x=(this.bounds.left+e)/this.screen.width*this.viewport.width,this.plane.position.x=-this.viewport.width/2+this.plane.scale.x/2+this.x}updateY(){this.y=this.bounds.top/this.screen.height*this.viewport.height,this.plane.position.y=this.viewport.height/2-this.plane.scale.y/2-this.y}update(e,t){this.bounds&&(this.animations.time+=.005,this.plane.material.uniforms.uTime.value=this.animations.time,this.animations.show||this.createBounds(),this.updateScale(),this.updateX(e),this.updateY())}addEventListeners(){this.link.addEventListener("mouseenter",this.onMouseEnter.bind(this)),this.link.addEventListener("mouseleave",this.onMouseLeave.bind(this))}}},"./app/shaders/hoverSquare/fragment.glsl":(e,t,i)=>{i.r(t),i.d(t,{default:()=>a});const a="#define GLSLIFY 1\nuniform float uAlpha; \nuniform float uState; \nuniform float uTime;\nuniform float uWidth; \nuniform float uRadius;  \nuniform float uLeaveState; \n\nuniform vec2 uPlaneSize; \nuniform vec2 uImageSize; \nuniform vec2 uViewportSize; \n\nuniform sampler2D tMap; \nuniform sampler2D tHover; \nuniform sampler2D tDisplacement;\n\nvarying vec2 vUv; \nvarying vec3 vPosition; \n\nvoid main()\n{\n  vec2 ratio = vec2(\n    min((uPlaneSize.x / uPlaneSize.y) / (uImageSize.x / uImageSize.y), 1.0), \n    min((uPlaneSize.y / uPlaneSize.x) / (uImageSize.y / uImageSize.x), 1.0)\n  ); \n\n  vec2 uv = vec2(\n    vUv.x * ratio.x + (1.0 - ratio.x) * 0.5, \n    vUv.y * ratio.y + (1.0 - ratio.y) * 0.5\n  ); \n\n  vec2 center = vec2(0.5, 0.5);\n\n  vec4 noise = texture2D(tDisplacement, vUv + (uTime * 0.02));\n  float state = uState * 0.66 + noise.g * 0.04;\n\n  float calcSquare = 1.0 - smoothstep(\n    -uWidth, \n    0.0,\n    uRadius * max(\n      abs(distance(center.x * ratio.x, vUv.x * ratio.x)), \n      abs(distance(center.y * ratio.y, vUv.y * ratio.y))) - state * (1.0 + uWidth)\n    );\n\n  float interpolation = pow(abs(calcSquare), 1.0);\n\n  vec4 t1 = texture2D( tMap, (uv - 0.5) * (1.0 - interpolation) + 0.5 );\n  vec4 t2 = texture2D( tHover, (uv - 0.5) * interpolation + 0.5 );\n\n  if(uLeaveState == 1.0)\n  {\n    t2 = vec4(1.,0.918,0.859, uAlpha);\n  }\n\n  gl_FragColor = mix( t1, t2, interpolation );\n  gl_FragColor.a = uAlpha;\n}"}},(function(e){e.h=()=>"91d16ffb0b3a5de3d341"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmFld2FycmVuLy4vYXBwL2NvbXBvbmVudHMvQ2FudmFzL0NvbnRyb2xsZXIvcGFnZXMvV29yay9FbGVtZW50L2luZGV4LmpzIiwid2VicGFjazovL3RyYWV3YXJyZW4vLi9hcHAvc2hhZGVycy9ob3ZlclNxdWFyZS9mcmFnbWVudC5nbHNsIiwid2VicGFjazovL3RyYWV3YXJyZW4vd2VicGFjay9ydW50aW1lL2dldEZ1bGxIYXNoIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNoYWRlck1hdGVyaWFsLCBNZXNoIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgZ3NhcCBmcm9tICdnc2FwJ1xuXG5pbXBvcnQgdmVydGV4IGZyb20gJ3NoYWRlcnMvdmVydGV4Lmdsc2wnXG5pbXBvcnQgZnJhZ21lbnQgZnJvbSAnc2hhZGVycy9ob3ZlclNxdWFyZS9mcmFnbWVudC5nbHNsJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbGVtZW50XG57XG4gIGNvbnN0cnVjdG9yKHsgZWxlbWVudCwgaW5kZXgsIGxpbmssIGRpc3BsYWNlbWVudCwgdGVtcGxhdGUsIGdlb21ldHJ5LCBzY2VuZSwgc2NyZWVuLCB2aWV3cG9ydCB9KVxuICB7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudCBcbiAgICB0aGlzLmluZGV4ID0gaW5kZXhcbiAgICB0aGlzLmxpbmsgPSBsaW5rXG4gICAgdGhpcy5kaXNwID0gZGlzcGxhY2VtZW50XG4gICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlIFxuICAgIHRoaXMuZ2VvID0gZ2VvbWV0cnkgXG4gICAgdGhpcy5zY2VuZSA9IHNjZW5lIFxuICAgIHRoaXMuc2NyZWVuID0gc2NyZWVuIFxuICAgIHRoaXMudmlld3BvcnQgPSB2aWV3cG9ydFxuXG4gICAgdGhpcy5hbmltYXRpb25zID0ge1xuICAgICAgc2hvdzogZmFsc2UsIFxuICAgICAgdGltZTogMCxcbiAgICB9XG5cbiAgICB0aGlzLmNyZWF0ZU1hdGVyaWFsKClcbiAgICB0aGlzLmNyZWF0ZVRleHR1cmUoKVxuICAgIHRoaXMuY3JlYXRlTWVzaCgpXG4gICAgdGhpcy5jcmVhdGVBbmltYXRpb25zKClcbiAgICB0aGlzLmNyZWF0ZUJvdW5kcygpXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpXG4gIH1cblxuICBjcmVhdGVNYXRlcmlhbCgpXG4gIHtcbiAgICB0aGlzLm1hdGVyaWFsID0gbmV3IFNoYWRlck1hdGVyaWFsKFxuICAgICAge1xuICAgICAgICB2ZXJ0ZXhTaGFkZXI6IHZlcnRleCwgXG4gICAgICAgIGZyYWdtZW50U2hhZGVyOiBmcmFnbWVudCwgXG4gICAgICAgIHVuaWZvcm1zOiB7XG4gICAgICAgICAgdE1hcDogeyB2YWx1ZTogbnVsbH0sIFxuICAgICAgICAgIHRIb3ZlcjogeyB2YWx1ZTogbnVsbCB9LFxuICAgICAgICAgIHREaXNwbGFjZW1lbnQ6IHsgdmFsdWU6IHRoaXMuZGlzcCB9LFxuICAgICAgICAgIHVBbHBoYTogeyB2YWx1ZTogMC4wIH0sIFxuICAgICAgICAgIHVTdGF0ZTogeyB2YWx1ZTogMC4wfSxcbiAgICAgICAgICB1VGltZTogeyB2YWx1ZTogMC4wIH0sXG4gICAgICAgICAgdVdpZHRoOiB7IHZhbHVlOiAwLjEgfSwgXG4gICAgICAgICAgdVJhZGl1czogeyB2YWx1ZTogMC4zIH0sXG4gICAgICAgICAgdUxlYXZlU3RhdGU6IHsgdmFsdWU6IDAuMCB9LFxuICAgICAgICAgIHVJbWFnZVNpemU6IHsgdmFsdWU6IFsgMC4wLCAwLjAgXSB9LCBcbiAgICAgICAgICB1UGxhbmVTaXplOiB7IHZhbHVlOiBbIDAuMCwgMC4wIF0gfSwgXG4gICAgICAgICAgdVZpZXdwb3J0U2l6ZTogeyB2YWx1ZTogWyB0aGlzLnZpZXdwb3J0LndpZHRoLCB0aGlzLnZpZXdwb3J0LmhlaWdodCBdIH1cbiAgICAgICAgfSxcbiAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUgXG4gICAgICB9XG4gICAgKVxuICB9XG5cbiAgY3JlYXRlVGV4dHVyZSgpXG4gIHtcbiAgICBsZXQgc3JjID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKVxuICAgIGxldCBob3ZlclNyYyA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaG92ZXInKVxuXG4gICAgdGhpcy50ZXh0dXJlID0gd2luZG93LklNQUdFX1RFWFRVUkVTW3NyY11cbiAgICB0aGlzLnRleHR1cmUyID0gd2luZG93LklNQUdFX1RFWFRVUkVTW2hvdmVyU3JjXVxuXG4gICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy50TWFwLnZhbHVlID0gdGhpcy50ZXh0dXJlIFxuICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMudEhvdmVyLnZhbHVlID0gdGhpcy50ZXh0dXJlMlxuICAgIFxuICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMudUltYWdlU2l6ZS52YWx1ZSA9IFtcbiAgICAgIHRoaXMudGV4dHVyZS5zb3VyY2UuZGF0YS5uYXR1cmFsV2lkdGgsXG4gICAgICB0aGlzLnRleHR1cmUuc291cmNlLmRhdGEubmF0dXJhbEhlaWdodFxuICAgIF1cbiAgfVxuXG4gIGNyZWF0ZU1lc2goKVxuICB7XG4gICAgdGhpcy5wbGFuZSA9IG5ldyBNZXNoKFxuICAgICAgdGhpcy5nZW8sIFxuICAgICAgdGhpcy5tYXRlcmlhbFxuICAgIClcbiAgICBcbiAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLnBsYW5lKVxuICB9XG5cbiAgY3JlYXRlQm91bmRzKClcbiAge1xuICAgIHRoaXMuYm91bmRzID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG5cbiAgICB0aGlzLnVwZGF0ZVNjYWxlKClcbiAgICB0aGlzLnVwZGF0ZVgoKVxuICAgIHRoaXMudXBkYXRlWSgpXG5cbiAgICB0aGlzLnBsYW5lLm1hdGVyaWFsLnVuaWZvcm1zLnVQbGFuZVNpemUudmFsdWUgPSBbdGhpcy5wbGFuZS5zY2FsZS54LCB0aGlzLnBsYW5lLnNjYWxlLnldXG4gIH1cblxuICBjcmVhdGVBbmltYXRpb25zKClcbiAge1xuICAgIHRoaXMub25BbHBoYUNoYW5nZSA9IGdzYXAuZnJvbVRvKFxuICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy51QWxwaGEsXG4gICAgICB7XG4gICAgICAgIHZhbHVlOiAwLjBcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHZhbHVlOiAxLjAsXG4gICAgICAgIGRlbGF5OiAwLjUsXG4gICAgICAgIHBhdXNlZDogdHJ1ZVxuICAgICAgfVxuICAgIClcblxuICAgIHRoaXMub25TdGF0ZUNoYW5nZSA9IGdzYXAuZnJvbVRvKFxuICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy51U3RhdGUsIFxuICAgICAge1xuICAgICAgICB2YWx1ZTogMC4wLCBcbiAgICAgIH0sIFxuICAgICAge1xuICAgICAgICB2YWx1ZTogMC4yLCBcbiAgICAgICAgZHVyYXRpb246IDEuMCwgXG4gICAgICAgIGVhc2U6ICdwb3dlcjIuaW5PdXQnLCBcbiAgICAgICAgcGF1c2VkOiB0cnVlXG4gICAgICB9XG4gICAgKVxuXG4gICAgdGhpcy5vblNob3cgPSBnc2FwLmZyb21UbyhcbiAgICAgIHRoaXMuZWxlbWVudCwgXG4gICAgICB7XG4gICAgICAgIHNjYWxlOiAwLjBcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHNjYWxlOiAxLjAsIFxuICAgICAgICBkdXJhdGlvbjogMS4wLCBcbiAgICAgICAgZGVsYXk6IDAuMiAqIHRoaXMuaW5kZXgsIFxuICAgICAgICBlYXNlOiAncG93ZXIyLmluT3V0JyxcbiAgICAgICAgcGF1c2VkOiB0cnVlLFxuICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiBcbiAgICAgICAge1xuICAgICAgICAgIHRoaXMuYW5pbWF0aW9ucy5zaG93ID0gdHJ1ZSBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIClcbiAgfVxuXG4gICAgLypcbiAgICBBTklNQVRJT05TLlxuICAqL1xuXG4gIG9uTW91c2VFbnRlcigpXG4gIHtcbiAgICB0aGlzLm9uU3RhdGVDaGFuZ2UucGxheSgpXG4gIH1cblxuICBvbk1vdXNlTGVhdmUoKVxuICB7XG4gICAgdGhpcy5vblN0YXRlQ2hhbmdlLnJldmVyc2UoKVxuICB9XG5cbiAgc2hvdygpXG4gIHtcbiAgICB0aGlzLm9uQWxwaGFDaGFuZ2UucGxheSgpXG4gICAgdGhpcy5vblNob3cucGxheSgpXG4gIH1cblxuICBoaWRlKClcbiAge1xuICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMudUxlYXZlU3RhdGUudmFsdWUgPSAxLjBcbiAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnVXaWR0aC52YWx1ZSA9IC4xXG4gICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy51UmFkaXVzLnZhbHVlID0gMC4xMlxuXG4gICAgdGhpcy5vblN0YXRlQ2hhbmdlLnBsYXkoKVxuICB9XG5cbiAgIC8qXG4gICAgRVZFTlRTLlxuICAqL1xuXG4gIG9uUmVzaXplKHNpemVzKVxuICB7XG4gICAgaWYoc2l6ZXMpXG4gICAge1xuICAgICAgY29uc3QgeyBzY3JlZW4sIHZpZXdwb3J0IH0gPSBzaXplc1xuXG4gICAgICBpZihzY3JlZW4pIHRoaXMuc2NyZWVuID0gc2NyZWVuXG4gICAgICBpZih2aWV3cG9ydCkge1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnRcblxuICAgICAgICB0aGlzLnBsYW5lLm1hdGVyaWFsLnVuaWZvcm1zLnVWaWV3cG9ydFNpemUudmFsdWUgPSBbdGhpcy52aWV3cG9ydC53aWR0aCwgdGhpcy52aWV3cG9ydC5oZWlnaHRdXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5jcmVhdGVCb3VuZHMoKVxuICB9XG5cbiAgLypcbiAgVVBEQVRFLlxuICAqL1xuXG4gIHVwZGF0ZVNjYWxlKClcbiAge1xuICAgIHRoaXMucGxhbmUuc2NhbGUueCA9IHRoaXMudmlld3BvcnQud2lkdGggKiB0aGlzLmJvdW5kcy53aWR0aCAvIHRoaXMuc2NyZWVuLndpZHRoXG4gICAgdGhpcy5wbGFuZS5zY2FsZS55ID0gdGhpcy52aWV3cG9ydC5oZWlnaHQgKiB0aGlzLmJvdW5kcy5oZWlnaHQgLyB0aGlzLnNjcmVlbi5oZWlnaHRcblxuICAgIHRoaXMucGxhbmUubWF0ZXJpYWwudW5pZm9ybXMudVBsYW5lU2l6ZS52YWx1ZSA9IFt0aGlzLnBsYW5lLnNjYWxlLngsIHRoaXMucGxhbmUuc2NhbGUueV1cbiAgfVxuXG4gIHVwZGF0ZVgoY3VycmVudD0wKVxuICB7XG4gICAgdGhpcy54ID0gKCh0aGlzLmJvdW5kcy5sZWZ0ICsgY3VycmVudCkgLyB0aGlzLnNjcmVlbi53aWR0aCkgKiB0aGlzLnZpZXdwb3J0LndpZHRoXG4gICAgdGhpcy5wbGFuZS5wb3NpdGlvbi54ID0gKC10aGlzLnZpZXdwb3J0LndpZHRoIC8gMikgKyAodGhpcy5wbGFuZS5zY2FsZS54IC8gMikgKyB0aGlzLnhcbiAgfVxuXG4gIHVwZGF0ZVkoKVxuICB7XG4gICAgdGhpcy55ID0gKHRoaXMuYm91bmRzLnRvcCAvIHRoaXMuc2NyZWVuLmhlaWdodCkgKiB0aGlzLnZpZXdwb3J0LmhlaWdodFxuICAgIHRoaXMucGxhbmUucG9zaXRpb24ueSA9ICh0aGlzLnZpZXdwb3J0LmhlaWdodCAvIDIpIC0gKHRoaXMucGxhbmUuc2NhbGUueSAvIDIpIC0gdGhpcy55XG4gIH1cblxuICB1cGRhdGUoY3VycmVudCwgbGFzdClcbiAge1xuICAgIGlmKCF0aGlzLmJvdW5kcykgcmV0dXJuXG5cbiAgICB0aGlzLmFuaW1hdGlvbnMudGltZSArPSAwLjAwNVxuXG4gICAgdGhpcy5wbGFuZS5tYXRlcmlhbC51bmlmb3Jtcy51VGltZS52YWx1ZSA9IHRoaXMuYW5pbWF0aW9ucy50aW1lXG5cbiAgICBpZighdGhpcy5hbmltYXRpb25zLnNob3cpXG4gICAge1xuICAgICAgdGhpcy5jcmVhdGVCb3VuZHMoKVxuICAgIH1cblxuICAgIHRoaXMudXBkYXRlU2NhbGUoKVxuICAgIHRoaXMudXBkYXRlWChjdXJyZW50KVxuICAgIHRoaXMudXBkYXRlWSgpXG4gIH1cblxuICBhZGRFdmVudExpc3RlbmVycygpXG4gIHtcbiAgICB0aGlzLmxpbmsuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMub25Nb3VzZUVudGVyLmJpbmQodGhpcykpXG4gICAgdGhpcy5saW5rLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLm9uTW91c2VMZWF2ZS5iaW5kKHRoaXMpKVxuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgXCIjZGVmaW5lIEdMU0xJRlkgMVxcbnVuaWZvcm0gZmxvYXQgdUFscGhhOyBcXG51bmlmb3JtIGZsb2F0IHVTdGF0ZTsgXFxudW5pZm9ybSBmbG9hdCB1VGltZTtcXG51bmlmb3JtIGZsb2F0IHVXaWR0aDsgXFxudW5pZm9ybSBmbG9hdCB1UmFkaXVzOyAgXFxudW5pZm9ybSBmbG9hdCB1TGVhdmVTdGF0ZTsgXFxuXFxudW5pZm9ybSB2ZWMyIHVQbGFuZVNpemU7IFxcbnVuaWZvcm0gdmVjMiB1SW1hZ2VTaXplOyBcXG51bmlmb3JtIHZlYzIgdVZpZXdwb3J0U2l6ZTsgXFxuXFxudW5pZm9ybSBzYW1wbGVyMkQgdE1hcDsgXFxudW5pZm9ybSBzYW1wbGVyMkQgdEhvdmVyOyBcXG51bmlmb3JtIHNhbXBsZXIyRCB0RGlzcGxhY2VtZW50O1xcblxcbnZhcnlpbmcgdmVjMiB2VXY7IFxcbnZhcnlpbmcgdmVjMyB2UG9zaXRpb247IFxcblxcbnZvaWQgbWFpbigpXFxue1xcbiAgdmVjMiByYXRpbyA9IHZlYzIoXFxuICAgIG1pbigodVBsYW5lU2l6ZS54IC8gdVBsYW5lU2l6ZS55KSAvICh1SW1hZ2VTaXplLnggLyB1SW1hZ2VTaXplLnkpLCAxLjApLCBcXG4gICAgbWluKCh1UGxhbmVTaXplLnkgLyB1UGxhbmVTaXplLngpIC8gKHVJbWFnZVNpemUueSAvIHVJbWFnZVNpemUueCksIDEuMClcXG4gICk7IFxcblxcbiAgdmVjMiB1diA9IHZlYzIoXFxuICAgIHZVdi54ICogcmF0aW8ueCArICgxLjAgLSByYXRpby54KSAqIDAuNSwgXFxuICAgIHZVdi55ICogcmF0aW8ueSArICgxLjAgLSByYXRpby55KSAqIDAuNVxcbiAgKTsgXFxuXFxuICB2ZWMyIGNlbnRlciA9IHZlYzIoMC41LCAwLjUpO1xcblxcbiAgdmVjNCBub2lzZSA9IHRleHR1cmUyRCh0RGlzcGxhY2VtZW50LCB2VXYgKyAodVRpbWUgKiAwLjAyKSk7XFxuICBmbG9hdCBzdGF0ZSA9IHVTdGF0ZSAqIDAuNjYgKyBub2lzZS5nICogMC4wNDtcXG5cXG4gIGZsb2F0IGNhbGNTcXVhcmUgPSAxLjAgLSBzbW9vdGhzdGVwKFxcbiAgICAtdVdpZHRoLCBcXG4gICAgMC4wLFxcbiAgICB1UmFkaXVzICogbWF4KFxcbiAgICAgIGFicyhkaXN0YW5jZShjZW50ZXIueCAqIHJhdGlvLngsIHZVdi54ICogcmF0aW8ueCkpLCBcXG4gICAgICBhYnMoZGlzdGFuY2UoY2VudGVyLnkgKiByYXRpby55LCB2VXYueSAqIHJhdGlvLnkpKSkgLSBzdGF0ZSAqICgxLjAgKyB1V2lkdGgpXFxuICAgICk7XFxuXFxuICBmbG9hdCBpbnRlcnBvbGF0aW9uID0gcG93KGFicyhjYWxjU3F1YXJlKSwgMS4wKTtcXG5cXG4gIHZlYzQgdDEgPSB0ZXh0dXJlMkQoIHRNYXAsICh1diAtIDAuNSkgKiAoMS4wIC0gaW50ZXJwb2xhdGlvbikgKyAwLjUgKTtcXG4gIHZlYzQgdDIgPSB0ZXh0dXJlMkQoIHRIb3ZlciwgKHV2IC0gMC41KSAqIGludGVycG9sYXRpb24gKyAwLjUgKTtcXG5cXG4gIGlmKHVMZWF2ZVN0YXRlID09IDEuMClcXG4gIHtcXG4gICAgdDIgPSB2ZWM0KDEuLDAuOTE4LDAuODU5LCB1QWxwaGEpO1xcbiAgfVxcblxcbiAgZ2xfRnJhZ0NvbG9yID0gbWl4KCB0MSwgdDIsIGludGVycG9sYXRpb24gKTtcXG4gIGdsX0ZyYWdDb2xvci5hID0gdUFscGhhO1xcbn1cIjsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCI5MWQxNmZmYjBiM2E1ZGUzZDM0MVwiKSJdLCJuYW1lcyI6WyJFbGVtZW50IiwiY29uc3RydWN0b3IiLCJlbGVtZW50IiwiaW5kZXgiLCJsaW5rIiwiZGlzcGxhY2VtZW50IiwidGVtcGxhdGUiLCJnZW9tZXRyeSIsInNjZW5lIiwic2NyZWVuIiwidmlld3BvcnQiLCJ0aGlzIiwiZGlzcCIsImdlbyIsImFuaW1hdGlvbnMiLCJzaG93IiwidGltZSIsImNyZWF0ZU1hdGVyaWFsIiwiY3JlYXRlVGV4dHVyZSIsImNyZWF0ZU1lc2giLCJjcmVhdGVBbmltYXRpb25zIiwiY3JlYXRlQm91bmRzIiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJtYXRlcmlhbCIsIlNoYWRlck1hdGVyaWFsIiwidmVydGV4U2hhZGVyIiwidmVydGV4IiwiZnJhZ21lbnRTaGFkZXIiLCJmcmFnbWVudCIsInVuaWZvcm1zIiwidE1hcCIsInZhbHVlIiwidEhvdmVyIiwidERpc3BsYWNlbWVudCIsInVBbHBoYSIsInVTdGF0ZSIsInVUaW1lIiwidVdpZHRoIiwidVJhZGl1cyIsInVMZWF2ZVN0YXRlIiwidUltYWdlU2l6ZSIsInVQbGFuZVNpemUiLCJ1Vmlld3BvcnRTaXplIiwid2lkdGgiLCJoZWlnaHQiLCJ0cmFuc3BhcmVudCIsInNyYyIsImdldEF0dHJpYnV0ZSIsImhvdmVyU3JjIiwidGV4dHVyZSIsIndpbmRvdyIsIklNQUdFX1RFWFRVUkVTIiwidGV4dHVyZTIiLCJzb3VyY2UiLCJkYXRhIiwibmF0dXJhbFdpZHRoIiwibmF0dXJhbEhlaWdodCIsInBsYW5lIiwiTWVzaCIsImFkZCIsImJvdW5kcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInVwZGF0ZVNjYWxlIiwidXBkYXRlWCIsInVwZGF0ZVkiLCJzY2FsZSIsIngiLCJ5Iiwib25BbHBoYUNoYW5nZSIsImdzYXAiLCJmcm9tVG8iLCJkZWxheSIsInBhdXNlZCIsIm9uU3RhdGVDaGFuZ2UiLCJkdXJhdGlvbiIsImVhc2UiLCJvblNob3ciLCJvbkNvbXBsZXRlIiwib25Nb3VzZUVudGVyIiwicGxheSIsIm9uTW91c2VMZWF2ZSIsInJldmVyc2UiLCJoaWRlIiwib25SZXNpemUiLCJzaXplcyIsImN1cnJlbnQiLCJsZWZ0IiwicG9zaXRpb24iLCJ0b3AiLCJ1cGRhdGUiLCJsYXN0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImJpbmQiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiaCJdLCJzb3VyY2VSb290IjoiIn0=