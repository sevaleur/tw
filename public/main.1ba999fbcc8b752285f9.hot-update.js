/*! For license information please see main.1ba999fbcc8b752285f9.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatetraewarren("main",{"./app/components/Canvas/Controller/pages/Home/CircleElement/index.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});var i=s("./node_modules/three/build/three.module.js"),a=s("./node_modules/gsap/index.js"),h=s("./app/shaders/vertex.glsl"),n=s("./app/shaders/hover/fragment.glsl");class r{constructor({element:e,index:t,link:s,displacement:i,template:a,geometry:h,scene:n,screen:r,viewport:o}){this.element=e,this.index=t,this.link=s,this.disp=i,this.template=a,this.geo=h,this.scene=n,this.screen=r,this.viewport=o,this.time=0,this.animations={show:!1,hide:!1},this.createMaterial(),this.createTexture(),this.createMesh(),this.createAnimations(),this.createBounds()}createMaterial(){this.material=new i.ShaderMaterial({vertexShader:h.default,fragmentShader:n.default,uniforms:{tMap:{value:null},tHover:{value:null},displacement:{value:this.disp},u_alpha:{value:0},u_state:{value:0},u_time:{value:0},u_width:{value:.1},u_radius:{value:.3},u_imageSize:{value:[0,0]},u_planeSize:{value:[0,0]},u_state:{value:0},u_viewportSize:{value:[this.viewport.width,this.viewport.height]}},transparent:!0})}createTexture(){let e=this.element.getAttribute("data-src"),t=this.element.getAttribute("data-hover");this.texture=window.IMAGE_TEXTURES[e],this.texture2=window.IMAGE_TEXTURES[t],this.material.uniforms.tMap.value=this.texture,this.material.uniforms.tHover.value=this.texture2,this.material.uniforms.u_imageSize.value=[this.texture.source.data.naturalWidth,this.texture.source.data.naturalHeight]}createMesh(){this.plane=new i.Mesh(this.geo,this.material),this.scene.add(this.plane)}createBounds(){this.bounds=this.element.getBoundingClientRect(),this.updateScale(),this.updateX(),this.updateY(),this.plane.material.uniforms.u_planeSize.value=[this.plane.scale.x,this.plane.scale.y]}createAnimations(){this.onAlphaChange=a.default.fromTo(this.material.uniforms.u_alpha,{value:0},{value:1,delay:.5,paused:!0}),this.onStateChange=a.default.fromTo(this.material.uniforms.u_state,{value:0},{value:.2,duration:1,ease:"power2.inOut",paused:!0}),this.onShowScale=a.default.fromTo(this.element,{scale:0},{scale:1,duration:1,delay:.2*this.index,ease:"power2.inOut",paused:!0,onComplete:()=>{this.animations.show=!0}})}onMouseEnter(){this.onStateChange.play()}onMouseLeave(){this.onStateChange.reverse()}show(){this.addEventListeners(),this.onShowScale.play(),this.onAlphaChange.play()}hide(){this.animations.hide=!0,this.removeEventListeners(),this.onShowScale.reverse(),this.onAlphaChange.reverse()}onResize(e){if(e){const{screen:t,viewport:s}=e;t&&(this.screen=t),s&&(this.viewport=s,this.plane.material.uniforms.u_viewportSize.value=[this.viewport.width,this.viewport.height])}this.createBounds()}updateScale(){this.plane.scale.x=this.viewport.width*this.bounds.width/this.screen.width,this.plane.scale.y=this.viewport.height*this.bounds.height/this.screen.height,this.plane.material.uniforms.u_planeSize.value=[this.plane.scale.x,this.plane.scale.y]}updateX(){this.x=this.bounds.left/this.screen.width*this.viewport.width,this.plane.position.x=-this.viewport.width/2+this.plane.scale.x/2+this.x}updateY(){this.y=this.bounds.top/this.screen.height*this.viewport.height,this.plane.position.y=this.viewport.height/2-this.plane.scale.y/2-this.y}update(){this.bounds&&(this.time+=.005,this.plane.material.uniforms.u_time.value=this.time,this.animations.show||this.createBounds(),this.animations.hide&&this.createBounds(),this.updateScale(),this.updateX(),this.updateY())}addEventListeners(){this.link.addEventListener("mouseenter",this.onMouseEnter.bind(this)),this.link.addEventListener("mouseleave",this.onMouseLeave.bind(this))}removeEventListeners(){this.link.removeEventListener("mouseenter",this.onMouseEnter),this.link.removeEventListener("mouseleave",this.onMouseLeave)}}},"./app/components/Canvas/Controller/pages/Home/index.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var i=s("./node_modules/three/build/three.module.js"),a=s("./app/components/Canvas/Controller/pages/Home/DelayedElement/index.js"),h=s("./app/components/Canvas/Controller/pages/Home/StaticElement/index.js"),n=s("./app/components/Canvas/Controller/pages/Home/CircleElement/index.js"),r=s("./app/components/Canvas/Controller/pages/Home/Background/index.js");class o{constructor({scene:e,screen:t,viewport:s,geo:a}){this.scene=e,this.screen=t,this.viewport=s,this.geo=a,this.dGroup=new i.Group,this.sGroup=new i.Group,this.createElements(),this.createImages(),this.onResize(),this.scene.add(this.dGroup,this.sGroup),this.show()}createElements(){this.home_element=document.querySelector(".home"),this.home_wrapper=document.querySelector(".home__wrapper"),this.delayedElements=document.querySelectorAll('[data-type="delay"]'),this.staticElements=document.querySelectorAll('[data-type="static"]'),this.circleElements=document.querySelectorAll(".home__showcase__gallery__image__figure__image"),this.backgroundElement=document.querySelector('[data-type="background"]'),this.links=document.querySelectorAll(".home__showcase__gallery__image__link"),this.disp=(new i.TextureLoader).load(this.circleElements[0].dataset.displacement)}createImages(){this.dElems=Array.from(this.delayedElements,((e,t)=>new a.default({element:e,index:t,template:this.template,geometry:this.geo,scene:this.dGroup,screen:this.screen,viewport:this.viewport}))),this.sElems=Array.from(this.staticElements,((e,t)=>new h.default({element:e,index:t,template:this.template,geometry:this.geo,scene:this.sGroup,screen:this.screen,viewport:this.viewport}))),this.cElems=Array.from(this.circleElements,((e,t)=>new n.default({element:e,index:t,link:this.links[t],displacement:this.disp,template:this.template,geometry:this.geo,scene:this.sGroup,screen:this.screen,viewport:this.viewport}))),this.background=new r.default({element:this.backgroundElement,geometry:this.geo,scene:this.sGroup,screen:this.screen,viewport:this.viewport})}onResize(){this.dElems.forEach((e=>{e.onResize({screen:this.screen,viewport:this.viewport})})),this.sElems.forEach((e=>{e.onResize({screen:this.screen,viewport:this.viewport})})),this.cElems.forEach((e=>{e.onResize({screen:this.screen,viewport:this.viewport})})),this.background.onResize({screen:this.screen,viewport:this.viewport})}show(){this.dElems.forEach((e=>{e.show()})),this.sElems.forEach((e=>{e.show()})),this.cElems.forEach((e=>{e.show()})),this.background.show()}hide(){this.dElems.forEach((e=>{e.hide()})),this.sElems.forEach((e=>{e.hide()})),this.cElems.forEach((e=>{e.hide()})),this.background.hide()}update(e){const t=e.current/this.screen.height*this.viewport.height;this.dGroup.position.y=.9*t,this.sGroup.position.y=t,this.dElems.forEach((e=>{e.update()})),this.sElems.forEach((e=>{e.update()})),this.cElems.forEach((e=>{e.update()})),this.background.update(e)}destroy(){this.scene.remove(this.dGroup),this.scene.remove(this.sGroup)}}}},(function(e){e.h=()=>"27dd8e6d4ccfd7b54d7e"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU9TLFNBQVFDLElBQVFBLEVBQUd4RyxNQUFNLElBQ3JDTCxLQUFLdUcsT0FBT0ssU0FBUUMsSUFBUUEsRUFBR3hHLE1BQU0sSUFDckNMLEtBQUt5RyxPQUFPRyxTQUFRQyxJQUFRQSxFQUFHeEcsTUFBTSxJQUNyQ0wsS0FBSzBHLFdBQVdyRyxNQUNsQixDQUVBQyxJQUFBQSxHQUVFTixLQUFLbUcsT0FBT1MsU0FBUUMsSUFBUUEsRUFBR3ZHLE1BQU0sSUFDckNOLEtBQUt1RyxPQUFPSyxTQUFRQyxJQUFRQSxFQUFHdkcsTUFBTSxJQUNyQ04sS0FBS3lHLE9BQU9HLFNBQVFDLElBQVFBLEVBQUd2RyxNQUFNLElBQ3JDTixLQUFLMEcsV0FBV3BHLE1BQ2xCLENBTUFzRSxNQUFBQSxDQUFPa0MsR0FFTCxNQUFNQyxFQUFXRCxFQUFPQyxRQUFVL0csS0FBS0YsT0FBT2lDLE9BQVUvQixLQUFLRCxTQUFTZ0MsT0FFdEUvQixLQUFLaUYsT0FBT1AsU0FBU3BCLEVBQWMsR0FBVnlELEVBQ3pCL0csS0FBS21GLE9BQU9ULFNBQVNwQixFQUFJeUQsRUFFekIvRyxLQUFLbUcsT0FBT1MsU0FBUUMsSUFBUUEsRUFBR2pDLFFBQVEsSUFDdkM1RSxLQUFLdUcsT0FBT0ssU0FBUUMsSUFBUUEsRUFBR2pDLFFBQVEsSUFDdkM1RSxLQUFLeUcsT0FBT0csU0FBUUMsSUFBUUEsRUFBR2pDLFFBQVEsSUFDdkM1RSxLQUFLMEcsV0FBVzlCLE9BQU9rQyxFQUN6QixDQU1BRSxPQUFBQSxHQUVFaEgsS0FBS0gsTUFBTW9ILE9BQU9qSCxLQUFLaUYsUUFDdkJqRixLQUFLSCxNQUFNb0gsT0FBT2pILEtBQUttRixPQUN6QixrQkN0TkYrQixFQUFvQkMsRUFBSSxJQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHJhZXdhcnJlbi8uL2FwcC9jb21wb25lbnRzL0NhbnZhcy9Db250cm9sbGVyL3BhZ2VzL0hvbWUvQ2lyY2xlRWxlbWVudC9pbmRleC5qcyIsIndlYnBhY2s6Ly90cmFld2FycmVuLy4vYXBwL2NvbXBvbmVudHMvQ2FudmFzL0NvbnRyb2xsZXIvcGFnZXMvSG9tZS9pbmRleC5qcyIsIndlYnBhY2s6Ly90cmFld2FycmVuL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTaGFkZXJNYXRlcmlhbCwgTWVzaCB9IGZyb20gJ3RocmVlJ1xuaW1wb3J0IGdzYXAgZnJvbSAnZ3NhcCdcblxuaW1wb3J0IHZlcnRleCBmcm9tICdzaGFkZXJzL3ZlcnRleC5nbHNsJ1xuaW1wb3J0IGZyYWdtZW50IGZyb20gJ3NoYWRlcnMvaG92ZXIvZnJhZ21lbnQuZ2xzbCdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2lyY2xlRWxlbWVudFxue1xuICBjb25zdHJ1Y3Rvcih7IGVsZW1lbnQsIGluZGV4LCBsaW5rLCBkaXNwbGFjZW1lbnQsIHRlbXBsYXRlLCBnZW9tZXRyeSwgc2NlbmUsIHNjcmVlbiwgdmlld3BvcnQgfSlcbiAge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQgXG4gICAgdGhpcy5pbmRleCA9IGluZGV4XG4gICAgdGhpcy5saW5rID0gbGlua1xuICAgIHRoaXMuZGlzcCA9IGRpc3BsYWNlbWVudFxuICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZSBcbiAgICB0aGlzLmdlbyA9IGdlb21ldHJ5IFxuICAgIHRoaXMuc2NlbmUgPSBzY2VuZSBcbiAgICB0aGlzLnNjcmVlbiA9IHNjcmVlbiBcbiAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnRcblxuICAgIHRoaXMudGltZSA9IDBcbiAgICB0aGlzLmFuaW1hdGlvbnMgPSB7XG4gICAgICBzaG93OiBmYWxzZSwgXG4gICAgICBoaWRlOiBmYWxzZVxuICAgIH1cblxuICAgIHRoaXMuY3JlYXRlTWF0ZXJpYWwoKVxuICAgIHRoaXMuY3JlYXRlVGV4dHVyZSgpXG4gICAgdGhpcy5jcmVhdGVNZXNoKClcbiAgICB0aGlzLmNyZWF0ZUFuaW1hdGlvbnMoKVxuICAgIHRoaXMuY3JlYXRlQm91bmRzKClcbiAgfVxuXG4gIGNyZWF0ZU1hdGVyaWFsKClcbiAge1xuICAgIHRoaXMubWF0ZXJpYWwgPSBuZXcgU2hhZGVyTWF0ZXJpYWwoXG4gICAgICB7XG4gICAgICAgIHZlcnRleFNoYWRlcjogdmVydGV4LCBcbiAgICAgICAgZnJhZ21lbnRTaGFkZXI6IGZyYWdtZW50LCBcbiAgICAgICAgdW5pZm9ybXM6IHtcbiAgICAgICAgICB0TWFwOiB7IHZhbHVlOiBudWxsfSwgXG4gICAgICAgICAgdEhvdmVyOiB7IHZhbHVlOiBudWxsIH0sXG4gICAgICAgICAgZGlzcGxhY2VtZW50OiB7IHZhbHVlOiB0aGlzLmRpc3AgfSxcbiAgICAgICAgICB1X2FscGhhOiB7IHZhbHVlOiAwLjAgfSwgXG4gICAgICAgICAgdV9zdGF0ZTogeyB2YWx1ZTogMC4wfSxcbiAgICAgICAgICB1X3RpbWU6IHsgdmFsdWU6IDAuMCB9LFxuICAgICAgICAgIHVfd2lkdGg6IHsgdmFsdWU6IDAuMSB9LCBcbiAgICAgICAgICB1X3JhZGl1czogeyB2YWx1ZTogMC4zIH0sXG4gICAgICAgICAgdV9pbWFnZVNpemU6IHsgdmFsdWU6IFsgMC4wLCAwLjAgXSB9LCBcbiAgICAgICAgICB1X3BsYW5lU2l6ZTogeyB2YWx1ZTogWyAwLjAsIDAuMCBdIH0sIFxuICAgICAgICAgIHVfc3RhdGU6IHsgdmFsdWU6IDAuMCB9LCBcbiAgICAgICAgICB1X3ZpZXdwb3J0U2l6ZTogeyB2YWx1ZTogWyB0aGlzLnZpZXdwb3J0LndpZHRoLCB0aGlzLnZpZXdwb3J0LmhlaWdodCBdIH1cbiAgICAgICAgfSxcbiAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUgXG4gICAgICB9XG4gICAgKVxuICB9XG5cbiAgY3JlYXRlVGV4dHVyZSgpXG4gIHtcbiAgICBsZXQgc3JjID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKVxuICAgIGxldCBob3ZlclNyYyA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaG92ZXInKVxuXG4gICAgdGhpcy50ZXh0dXJlID0gd2luZG93LklNQUdFX1RFWFRVUkVTW3NyY11cbiAgICB0aGlzLnRleHR1cmUyID0gd2luZG93LklNQUdFX1RFWFRVUkVTW2hvdmVyU3JjXVxuXG4gICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy50TWFwLnZhbHVlID0gdGhpcy50ZXh0dXJlIFxuICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMudEhvdmVyLnZhbHVlID0gdGhpcy50ZXh0dXJlMlxuICAgIFxuICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMudV9pbWFnZVNpemUudmFsdWUgPSBbXG4gICAgICB0aGlzLnRleHR1cmUuc291cmNlLmRhdGEubmF0dXJhbFdpZHRoLFxuICAgICAgdGhpcy50ZXh0dXJlLnNvdXJjZS5kYXRhLm5hdHVyYWxIZWlnaHRcbiAgICBdXG4gIH1cblxuICBjcmVhdGVNZXNoKClcbiAge1xuICAgIHRoaXMucGxhbmUgPSBuZXcgTWVzaChcbiAgICAgIHRoaXMuZ2VvLCBcbiAgICAgIHRoaXMubWF0ZXJpYWxcbiAgICApXG4gICAgXG4gICAgdGhpcy5zY2VuZS5hZGQodGhpcy5wbGFuZSlcbiAgfVxuXG4gIGNyZWF0ZUJvdW5kcygpXG4gIHtcbiAgICB0aGlzLmJvdW5kcyA9IHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuXG4gICAgdGhpcy51cGRhdGVTY2FsZSgpXG4gICAgdGhpcy51cGRhdGVYKClcbiAgICB0aGlzLnVwZGF0ZVkoKVxuXG4gICAgdGhpcy5wbGFuZS5tYXRlcmlhbC51bmlmb3Jtcy51X3BsYW5lU2l6ZS52YWx1ZSA9IFt0aGlzLnBsYW5lLnNjYWxlLngsIHRoaXMucGxhbmUuc2NhbGUueV1cbiAgfVxuXG4gIGNyZWF0ZUFuaW1hdGlvbnMoKVxuICB7XG4gICAgdGhpcy5vbkFscGhhQ2hhbmdlID0gZ3NhcC5mcm9tVG8oXG4gICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnVfYWxwaGEsXG4gICAgICB7XG4gICAgICAgIHZhbHVlOiAwLjBcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHZhbHVlOiAxLjAsXG4gICAgICAgIGRlbGF5OiAwLjUsXG4gICAgICAgIHBhdXNlZDogdHJ1ZVxuICAgICAgfVxuICAgIClcblxuICAgIHRoaXMub25TdGF0ZUNoYW5nZSA9IGdzYXAuZnJvbVRvKFxuICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy51X3N0YXRlLCBcbiAgICAgIHtcbiAgICAgICAgdmFsdWU6IDAuMCwgXG4gICAgICB9LCBcbiAgICAgIHtcbiAgICAgICAgdmFsdWU6IDAuMiwgXG4gICAgICAgIGR1cmF0aW9uOiAxLjAsIFxuICAgICAgICBlYXNlOiAncG93ZXIyLmluT3V0JywgXG4gICAgICAgIHBhdXNlZDogdHJ1ZVxuICAgICAgfVxuICAgIClcblxuICAgIHRoaXMub25TaG93U2NhbGUgPSBnc2FwLmZyb21UbyhcbiAgICAgIHRoaXMuZWxlbWVudCwgXG4gICAgICB7XG4gICAgICAgIHNjYWxlOiAwXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBzY2FsZTogMS4wLCBcbiAgICAgICAgZHVyYXRpb246IDEuMCwgXG4gICAgICAgIGRlbGF5OiAwLjIgKiB0aGlzLmluZGV4LCBcbiAgICAgICAgZWFzZTogJ3Bvd2VyMi5pbk91dCcsXG4gICAgICAgIHBhdXNlZDogdHJ1ZSxcbiAgICAgICAgb25Db21wbGV0ZTogKCkgPT4gXG4gICAgICAgIHtcbiAgICAgICAgICB0aGlzLmFuaW1hdGlvbnMuc2hvdyA9IHRydWUgXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApXG4gIH1cblxuICAgIC8qXG4gICAgQU5JTUFUSU9OUy5cbiAgKi9cblxuICBvbk1vdXNlRW50ZXIoKVxuICB7XG4gICAgdGhpcy5vblN0YXRlQ2hhbmdlLnBsYXkoKVxuICB9XG5cbiAgb25Nb3VzZUxlYXZlKClcbiAge1xuICAgIHRoaXMub25TdGF0ZUNoYW5nZS5yZXZlcnNlKClcbiAgfVxuXG4gIHNob3coKVxuICB7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpXG5cbiAgICB0aGlzLm9uU2hvd1NjYWxlLnBsYXkoKVxuICAgIHRoaXMub25BbHBoYUNoYW5nZS5wbGF5KClcbiAgfVxuXG4gIGhpZGUoKVxuICB7XG4gICAgdGhpcy5hbmltYXRpb25zLmhpZGUgPSB0cnVlIFxuICAgIFxuICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKVxuICAgIFxuICAgIHRoaXMub25TaG93U2NhbGUucmV2ZXJzZSgpXG4gICAgdGhpcy5vbkFscGhhQ2hhbmdlLnJldmVyc2UoKVxuICB9XG5cbiAgIC8qXG4gICAgRVZFTlRTLlxuICAqL1xuXG4gIG9uUmVzaXplKHNpemVzKVxuICB7XG4gICAgaWYoc2l6ZXMpXG4gICAge1xuICAgICAgY29uc3QgeyBzY3JlZW4sIHZpZXdwb3J0IH0gPSBzaXplc1xuXG4gICAgICBpZihzY3JlZW4pIHRoaXMuc2NyZWVuID0gc2NyZWVuXG4gICAgICBpZih2aWV3cG9ydCkge1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnRcblxuICAgICAgICB0aGlzLnBsYW5lLm1hdGVyaWFsLnVuaWZvcm1zLnVfdmlld3BvcnRTaXplLnZhbHVlID0gW3RoaXMudmlld3BvcnQud2lkdGgsIHRoaXMudmlld3BvcnQuaGVpZ2h0XVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY3JlYXRlQm91bmRzKClcbiAgfVxuXG4gIC8qXG4gIFVQREFURS5cbiAgKi9cblxuICB1cGRhdGVTY2FsZSgpXG4gIHtcbiAgICB0aGlzLnBsYW5lLnNjYWxlLnggPSB0aGlzLnZpZXdwb3J0LndpZHRoICogdGhpcy5ib3VuZHMud2lkdGggLyB0aGlzLnNjcmVlbi53aWR0aFxuICAgIHRoaXMucGxhbmUuc2NhbGUueSA9IHRoaXMudmlld3BvcnQuaGVpZ2h0ICogdGhpcy5ib3VuZHMuaGVpZ2h0IC8gdGhpcy5zY3JlZW4uaGVpZ2h0XG5cbiAgICB0aGlzLnBsYW5lLm1hdGVyaWFsLnVuaWZvcm1zLnVfcGxhbmVTaXplLnZhbHVlID0gW3RoaXMucGxhbmUuc2NhbGUueCwgdGhpcy5wbGFuZS5zY2FsZS55XVxuICB9XG5cbiAgdXBkYXRlWCgpXG4gIHtcbiAgICB0aGlzLnggPSAodGhpcy5ib3VuZHMubGVmdCAvIHRoaXMuc2NyZWVuLndpZHRoKSAqIHRoaXMudmlld3BvcnQud2lkdGhcbiAgICB0aGlzLnBsYW5lLnBvc2l0aW9uLnggPSAoLXRoaXMudmlld3BvcnQud2lkdGggLyAyKSArICh0aGlzLnBsYW5lLnNjYWxlLnggLyAyKSArIHRoaXMueFxuICB9XG5cbiAgdXBkYXRlWSgpXG4gIHtcbiAgICB0aGlzLnkgPSAodGhpcy5ib3VuZHMudG9wIC8gdGhpcy5zY3JlZW4uaGVpZ2h0KSAqIHRoaXMudmlld3BvcnQuaGVpZ2h0XG4gICAgdGhpcy5wbGFuZS5wb3NpdGlvbi55ID0gKHRoaXMudmlld3BvcnQuaGVpZ2h0IC8gMikgLSAodGhpcy5wbGFuZS5zY2FsZS55IC8gMikgLSB0aGlzLnlcbiAgfVxuXG4gIHVwZGF0ZSgpXG4gIHtcbiAgICBpZighdGhpcy5ib3VuZHMpIHJldHVyblxuXG4gICAgdGhpcy50aW1lICs9IDAuMDA1XG5cbiAgICB0aGlzLnBsYW5lLm1hdGVyaWFsLnVuaWZvcm1zLnVfdGltZS52YWx1ZSA9IHRoaXMudGltZVxuXG4gICAgaWYoIXRoaXMuYW5pbWF0aW9ucy5zaG93KVxuICAgICAgdGhpcy5jcmVhdGVCb3VuZHMoKVxuXG4gICAgaWYodGhpcy5hbmltYXRpb25zLmhpZGUpXG4gICAgICB0aGlzLmNyZWF0ZUJvdW5kcygpXG5cbiAgICB0aGlzLnVwZGF0ZVNjYWxlKClcbiAgICB0aGlzLnVwZGF0ZVgoKVxuICAgIHRoaXMudXBkYXRlWSgpXG4gIH1cblxuICBhZGRFdmVudExpc3RlbmVycygpXG4gIHtcbiAgICB0aGlzLmxpbmsuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMub25Nb3VzZUVudGVyLmJpbmQodGhpcykpXG4gICAgdGhpcy5saW5rLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLm9uTW91c2VMZWF2ZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKVxuICB7XG4gICAgdGhpcy5saW5rLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCB0aGlzLm9uTW91c2VFbnRlcilcbiAgICB0aGlzLmxpbmsucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMub25Nb3VzZUxlYXZlKVxuICB9XG59IiwiaW1wb3J0IHsgR3JvdXAsIFRleHR1cmVMb2FkZXIgfSBmcm9tICd0aHJlZScgXG5cbmltcG9ydCBEZWxheWVkRWxlbWVudCBmcm9tICcuL0RlbGF5ZWRFbGVtZW50J1xuaW1wb3J0IFN0YXRpY0VsZW1lbnQgZnJvbSAnLi9TdGF0aWNFbGVtZW50J1xuaW1wb3J0IENpcmNsZUVsZW1lbnQgZnJvbSAnLi9DaXJjbGVFbGVtZW50J1xuaW1wb3J0IEJhY2tncm91bmQgZnJvbSAnLi9CYWNrZ3JvdW5kJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIb21lIFxue1xuICBjb25zdHJ1Y3Rvcih7IHNjZW5lLCBzY3JlZW4sIHZpZXdwb3J0LCBnZW8gfSlcbiAge1xuICAgIHRoaXMuc2NlbmUgPSBzY2VuZSBcbiAgICB0aGlzLnNjcmVlbiA9IHNjcmVlbiBcbiAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnQgXG4gICAgdGhpcy5nZW8gPSBnZW8gXG5cbiAgICB0aGlzLmRHcm91cCA9IG5ldyBHcm91cCgpXG4gICAgdGhpcy5zR3JvdXAgPSBuZXcgR3JvdXAoKVxuXG4gICAgdGhpcy5jcmVhdGVFbGVtZW50cygpXG4gICAgdGhpcy5jcmVhdGVJbWFnZXMoKVxuXG4gICAgdGhpcy5vblJlc2l6ZSgpXG5cbiAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLmRHcm91cCwgdGhpcy5zR3JvdXApXG5cbiAgICB0aGlzLnNob3coKVxuICB9XG5cbiAgLyogXG4gICAgQ1JFQVRFLlxuICAqL1xuXG4gIGNyZWF0ZUVsZW1lbnRzKClcbiAge1xuICAgIHRoaXMuaG9tZV9lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvbWUnKVxuICAgIHRoaXMuaG9tZV93cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvbWVfX3dyYXBwZXInKVxuXG4gICAgdGhpcy5kZWxheWVkRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS10eXBlPVwiZGVsYXlcIl0nKVxuICAgIHRoaXMuc3RhdGljRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS10eXBlPVwic3RhdGljXCJdJylcbiAgICB0aGlzLmNpcmNsZUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhvbWVfX3Nob3djYXNlX19nYWxsZXJ5X19pbWFnZV9fZmlndXJlX19pbWFnZScpXG4gICAgdGhpcy5iYWNrZ3JvdW5kRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXR5cGU9XCJiYWNrZ3JvdW5kXCJdJylcblxuICAgIHRoaXMubGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaG9tZV9fc2hvd2Nhc2VfX2dhbGxlcnlfX2ltYWdlX19saW5rJylcblxuICAgIHRoaXMuZGlzcCA9IG5ldyBUZXh0dXJlTG9hZGVyKCkubG9hZCh0aGlzLmNpcmNsZUVsZW1lbnRzWzBdLmRhdGFzZXQuZGlzcGxhY2VtZW50KVxuICB9XG5cbiAgY3JlYXRlSW1hZ2VzKClcbiAge1xuICAgIHRoaXMuZEVsZW1zID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuZGVsYXllZEVsZW1lbnRzLFxuICAgICAgKGVsZW1lbnQsIGluZGV4KSA9PiBcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEZWxheWVkRWxlbWVudChcbiAgICAgICAgICB7XG4gICAgICAgICAgICBlbGVtZW50LFxuICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogdGhpcy50ZW1wbGF0ZSxcbiAgICAgICAgICAgIGdlb21ldHJ5OiB0aGlzLmdlbywgXG4gICAgICAgICAgICBzY2VuZTogdGhpcy5kR3JvdXAsIFxuICAgICAgICAgICAgc2NyZWVuOiB0aGlzLnNjcmVlbiwgXG4gICAgICAgICAgICB2aWV3cG9ydDogdGhpcy52aWV3cG9ydFxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgfVxuICAgIClcblxuICAgIHRoaXMuc0VsZW1zID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuc3RhdGljRWxlbWVudHMsIFxuICAgICAgKGVsZW1lbnQsIGluZGV4KSA9PiBcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdGF0aWNFbGVtZW50KFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVsZW1lbnQsIFxuICAgICAgICAgICAgaW5kZXgsIFxuICAgICAgICAgICAgdGVtcGxhdGU6IHRoaXMudGVtcGxhdGUsIFxuICAgICAgICAgICAgZ2VvbWV0cnk6IHRoaXMuZ2VvLCBcbiAgICAgICAgICAgIHNjZW5lOiB0aGlzLnNHcm91cCwgXG4gICAgICAgICAgICBzY3JlZW46IHRoaXMuc2NyZWVuLCBcbiAgICAgICAgICAgIHZpZXdwb3J0OiB0aGlzLnZpZXdwb3J0XG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgKVxuXG4gICAgdGhpcy5jRWxlbXMgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5jaXJjbGVFbGVtZW50cyxcbiAgICAgIChlbGVtZW50LCBpbmRleCkgPT4gXG4gICAgICB7XG4gICAgICAgIHJldHVybiBuZXcgQ2lyY2xlRWxlbWVudChcbiAgICAgICAgICB7XG4gICAgICAgICAgICBlbGVtZW50LFxuICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICBsaW5rOiB0aGlzLmxpbmtzW2luZGV4XSxcbiAgICAgICAgICAgIGRpc3BsYWNlbWVudDogdGhpcy5kaXNwLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHRoaXMudGVtcGxhdGUsXG4gICAgICAgICAgICBnZW9tZXRyeTogdGhpcy5nZW8sIFxuICAgICAgICAgICAgc2NlbmU6IHRoaXMuc0dyb3VwLCBcbiAgICAgICAgICAgIHNjcmVlbjogdGhpcy5zY3JlZW4sIFxuICAgICAgICAgICAgdmlld3BvcnQ6IHRoaXMudmlld3BvcnRcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICApXG5cbiAgICB0aGlzLmJhY2tncm91bmQgPSBuZXcgQmFja2dyb3VuZChcbiAgICAgIHtcbiAgICAgICAgZWxlbWVudDogdGhpcy5iYWNrZ3JvdW5kRWxlbWVudCwgXG4gICAgICAgIGdlb21ldHJ5OiB0aGlzLmdlbywgXG4gICAgICAgIHNjZW5lOiB0aGlzLnNHcm91cCwgXG4gICAgICAgIHNjcmVlbjogdGhpcy5zY3JlZW4sIFxuICAgICAgICB2aWV3cG9ydDogdGhpcy52aWV3cG9ydFxuICAgICAgfVxuICAgIClcbiAgfVxuXG5cbiAgLyogXG4gICAgRVZFTlRTLlxuICAqL1xuXG4gIG9uUmVzaXplKClcbiAge1xuICAgIHRoaXMuZEVsZW1zLmZvckVhY2goXG4gICAgICBlbGVtZW50ID0+IFxuICAgICAge1xuICAgICAgICBlbGVtZW50Lm9uUmVzaXplKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNjcmVlbjogdGhpcy5zY3JlZW4sXG4gICAgICAgICAgICB2aWV3cG9ydDogdGhpcy52aWV3cG9ydCxcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICApXG5cbiAgICB0aGlzLnNFbGVtcy5mb3JFYWNoKFxuICAgICAgZWwgPT4gXG4gICAgICB7XG4gICAgICAgIGVsLm9uUmVzaXplKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNjcmVlbjogdGhpcy5zY3JlZW4sIFxuICAgICAgICAgICAgdmlld3BvcnQ6IHRoaXMudmlld3BvcnRcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICApXG5cbiAgICB0aGlzLmNFbGVtcy5mb3JFYWNoKFxuICAgICAgZWwgPT4gXG4gICAgICB7XG4gICAgICAgIGVsLm9uUmVzaXplKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNjcmVlbjogdGhpcy5zY3JlZW4sIFxuICAgICAgICAgICAgdmlld3BvcnQ6IHRoaXMudmlld3BvcnRcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICApXG5cbiAgICB0aGlzLmJhY2tncm91bmQub25SZXNpemUoXG4gICAgICB7XG4gICAgICAgIHNjcmVlbjogdGhpcy5zY3JlZW4sIFxuICAgICAgICB2aWV3cG9ydDogdGhpcy52aWV3cG9ydFxuICAgICAgfVxuICAgIClcblxuICB9XG5cbiAgLyogXG4gICAgQU5JTUFUSU9OUy5cbiAgKi9cblxuICBzaG93KClcbiAge1xuICAgIHRoaXMuZEVsZW1zLmZvckVhY2goZWwgPT4geyBlbC5zaG93KCkgfSApXG4gICAgdGhpcy5zRWxlbXMuZm9yRWFjaChlbCA9PiB7IGVsLnNob3coKSB9IClcbiAgICB0aGlzLmNFbGVtcy5mb3JFYWNoKGVsID0+IHsgZWwuc2hvdygpIH0gKVxuICAgIHRoaXMuYmFja2dyb3VuZC5zaG93KClcbiAgfVxuXG4gIGhpZGUoKVxuICB7XG4gICAgdGhpcy5kRWxlbXMuZm9yRWFjaChlbCA9PiB7IGVsLmhpZGUoKSB9KVxuICAgIHRoaXMuc0VsZW1zLmZvckVhY2goZWwgPT4geyBlbC5oaWRlKCkgfSlcbiAgICB0aGlzLmNFbGVtcy5mb3JFYWNoKGVsID0+IHsgZWwuaGlkZSgpIH0pXG4gICAgdGhpcy5iYWNrZ3JvdW5kLmhpZGUoKVxuICB9XG5cbiAgLyogXG4gICAgVVBEQVRFLlxuICAqL1xuXG4gIHVwZGF0ZShzY3JvbGwpXG4gIHtcbiAgICBjb25zdCBjdXJyZW50ID0gKHNjcm9sbC5jdXJyZW50IC8gdGhpcy5zY3JlZW4uaGVpZ2h0KSAqIHRoaXMudmlld3BvcnQuaGVpZ2h0XG4gICAgXG4gICAgdGhpcy5kR3JvdXAucG9zaXRpb24ueSA9IGN1cnJlbnQgKiAwLjlcbiAgICB0aGlzLnNHcm91cC5wb3NpdGlvbi55ID0gY3VycmVudFxuXG4gICAgdGhpcy5kRWxlbXMuZm9yRWFjaChlbCA9PiB7IGVsLnVwZGF0ZSgpIH0pXG4gICAgdGhpcy5zRWxlbXMuZm9yRWFjaChlbCA9PiB7IGVsLnVwZGF0ZSgpIH0pXG4gICAgdGhpcy5jRWxlbXMuZm9yRWFjaChlbCA9PiB7IGVsLnVwZGF0ZSgpIH0pXG4gICAgdGhpcy5iYWNrZ3JvdW5kLnVwZGF0ZShzY3JvbGwpXG4gIH1cblxuICAvKlxuICAgIERFU1RST1kuXG4gICovXG5cbiAgZGVzdHJveSgpXG4gIHtcbiAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLmRHcm91cClcbiAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLnNHcm91cClcbiAgfVxufSIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcIjI3ZGQ4ZTZkNGNjZmQ3YjU0ZDdlXCIpIl0sIm5hbWVzIjpbIkNpcmNsZUVsZW1lbnQiLCJjb25zdHJ1Y3RvciIsImVsZW1lbnQiLCJpbmRleCIsImxpbmsiLCJkaXNwbGFjZW1lbnQiLCJ0ZW1wbGF0ZSIsImdlb21ldHJ5Iiwic2NlbmUiLCJzY3JlZW4iLCJ2aWV3cG9ydCIsInRoaXMiLCJkaXNwIiwiZ2VvIiwidGltZSIsImFuaW1hdGlvbnMiLCJzaG93IiwiaGlkZSIsImNyZWF0ZU1hdGVyaWFsIiwiY3JlYXRlVGV4dHVyZSIsImNyZWF0ZU1lc2giLCJjcmVhdGVBbmltYXRpb25zIiwiY3JlYXRlQm91bmRzIiwibWF0ZXJpYWwiLCJTaGFkZXJNYXRlcmlhbCIsInZlcnRleFNoYWRlciIsInZlcnRleCIsImZyYWdtZW50U2hhZGVyIiwiZnJhZ21lbnQiLCJ1bmlmb3JtcyIsInRNYXAiLCJ2YWx1ZSIsInRIb3ZlciIsInVfYWxwaGEiLCJ1X3N0YXRlIiwidV90aW1lIiwidV93aWR0aCIsInVfcmFkaXVzIiwidV9pbWFnZVNpemUiLCJ1X3BsYW5lU2l6ZSIsInVfdmlld3BvcnRTaXplIiwid2lkdGgiLCJoZWlnaHQiLCJ0cmFuc3BhcmVudCIsInNyYyIsImdldEF0dHJpYnV0ZSIsImhvdmVyU3JjIiwidGV4dHVyZSIsIndpbmRvdyIsIklNQUdFX1RFWFRVUkVTIiwidGV4dHVyZTIiLCJzb3VyY2UiLCJkYXRhIiwibmF0dXJhbFdpZHRoIiwibmF0dXJhbEhlaWdodCIsInBsYW5lIiwiTWVzaCIsImFkZCIsImJvdW5kcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInVwZGF0ZVNjYWxlIiwidXBkYXRlWCIsInVwZGF0ZVkiLCJzY2FsZSIsIngiLCJ5Iiwib25BbHBoYUNoYW5nZSIsImdzYXAiLCJmcm9tVG8iLCJkZWxheSIsInBhdXNlZCIsIm9uU3RhdGVDaGFuZ2UiLCJkdXJhdGlvbiIsImVhc2UiLCJvblNob3dTY2FsZSIsIm9uQ29tcGxldGUiLCJvbk1vdXNlRW50ZXIiLCJwbGF5Iiwib25Nb3VzZUxlYXZlIiwicmV2ZXJzZSIsImFkZEV2ZW50TGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJvblJlc2l6ZSIsInNpemVzIiwibGVmdCIsInBvc2l0aW9uIiwidG9wIiwidXBkYXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiSG9tZSIsImRHcm91cCIsIkdyb3VwIiwic0dyb3VwIiwiY3JlYXRlRWxlbWVudHMiLCJjcmVhdGVJbWFnZXMiLCJob21lX2VsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJob21lX3dyYXBwZXIiLCJkZWxheWVkRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwic3RhdGljRWxlbWVudHMiLCJjaXJjbGVFbGVtZW50cyIsImJhY2tncm91bmRFbGVtZW50IiwibGlua3MiLCJUZXh0dXJlTG9hZGVyIiwibG9hZCIsImRhdGFzZXQiLCJkRWxlbXMiLCJBcnJheSIsImZyb20iLCJEZWxheWVkRWxlbWVudCIsInNFbGVtcyIsIlN0YXRpY0VsZW1lbnQiLCJjRWxlbXMiLCJiYWNrZ3JvdW5kIiwiQmFja2dyb3VuZCIsImZvckVhY2giLCJlbCIsInNjcm9sbCIsImN1cnJlbnQiLCJkZXN0cm95IiwicmVtb3ZlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9